{% extends "base.html" %}

{% block content %}
<div class="content-box">
    <h2>Reset Admin Credentials</h2>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <div class="security-notice">
        <h5><i class="fas fa-exclamation-triangle"></i> Security Notice</h5>
        <p>This is a sensitive administrative function. Use only if you have forgotten your admin credentials but have access to the reset token.</p>
    </div>
    
    <form method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        
        <div class="form-group">
            <label>Reset Token</label>
            <input type="password" name="reset_token" required class="form-control">
            <small>Enter the admin reset token from your environment variables.</small>
        </div>
        
        <div class="form-group">
            <label>New Username</label>
            <input type="text" name="new_username" required class="form-control">
        </div>
        
        <div class="form-group">
            <label>New Password</label>
            <input type="password" name="new_password" required class="form-control">
            <small>Password must be at least 12 characters with uppercase, lowercase, number, and special character.</small>
        </div>
        
        <div class="form-group">
            <label>Confirm Password</label>
            <input type="password" name="confirm_password" required class="form-control">
        </div>
        
        <button type="submit" class="btn">Reset Credentials</button>
    </form>
</div>

<style>
.security-notice {
    background-color: #fff3cd;
    border-left: 4px solid #ffc107;
    padding: 1rem;
    margin-bottom: 1.5rem;
}
</style>
{% endblock %}
