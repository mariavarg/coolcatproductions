<div id="cart-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Your Cart</h2>
        <div class="cart-items">
            {% for item in session.get('cart', []) %}
            <div class="cart-item">
                <img src="{{ url_for('static', filename=item.image) }}" 
                     alt="{{ item.name }}">
                <div>
                    <h3>{{ item.name }}</h3>
                    <p>£{{ "%.2f"|format(item.price) }} × {{ item.quantity }}</p>
                </div>
                <span>£{{ "%.2f"|format(item.item_total) }}</span>
            </div>
            {% else %}
            <p>Your cart is empty</p>
            {% endfor %}
        </div>
        <div class="cart-total">
            <p>Total: £{{ "%.2f"|format(total) }}</p>
        </div>
        <a href="{{ url_for('cart') }}" class="btn">View Full Cart</a>
    </div>
</div>

<script>
    // Cart modal functionality
    const modal = document.getElementById("cart-modal");
    const btn = document.querySelector("nav a[href='{{ url_for('cart') }}']");
    const span = document.getElementsByClassName("close")[0];
    
    btn.onclick = function(event) {
        event.preventDefault();
        modal.style.display = "block";
    }
    
    span.onclick = function() {
        modal.style.display = "none";
    }
    
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
